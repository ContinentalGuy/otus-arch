# [Hot Diggety Dog](https://nealford.com/katas/kata?id=HotDiggetyDog)

## Бизнес контекст
Владелец местных ларьков с хот-догами хочет обзавестить системой для управления торговыми точками.

**Пользователи**: ~50 продавцов

**Требования**:
- система должна работать на небольших устройствах (меньше ноутбука), чтобы его можно было эффективно использовать на мобильных точках продаж
- в системе можно делать скидки
- сохраняет время и место продажи каждого хот-дога
- отправляет уведомления сотрудникам, отвечающим за пополнение запасов точек продаж
- интегрировано с соц. сетями, чтобы можно было уведомлять клиентов когда они находятся вблизи точек продаж
- может выгружать отчеты в формате, который умеет читать бухгалтерское ПО

**Дополнительный контекст**:
- вынуждены заняться разработкой, потому что текущие способы отслеживания продаж требуют слишком много ручного труда
- нужно разработать как можно быстрее
- однако, важнее будет разработать систему так, чтобы ее не надо было переписывать в течение 3-х лет
- ограничений по бюджету нет

## Внимание

Данный кейс уже был рассмотрен ранее ([тут](otus-arch/homeworks/july/1/homework.md) и [тут](otus-arch/homeworks/august/1/homework.md)).\
Было найдено два архитектурных решения, одно из которых предполагает разработку системы с нуля.\
При разработке системы с нуля, были выбраны следующие контексты:
- контекст продавца
- контекст снабженца
- контекст администратора

Каждый контекст предполагает разработку отдельного сервиса.
На сценариях их взаимодействии и будет сконцентрирована данная ADR.

## Сценарии
### Продажа хот-дога
```mermaid
sequenceDiagram
    participant POS as Point Of Sale
    participant DB as Local Database
    POS->>DB: 2.99$ for Corn dog 
    DB-->>POS: OK
```
> POS - клиентское приложение продавца на мобильном устройстве
> DB - база на мобильном устройстве
#### Оценка атрибутов качества
Надежность: 99.99% (если не уронить мобильное устройство в кипящее масло / раздавить, наехав на него мобильной точкой продаж)\
Производительность: 99.99% (в зависимости от процессора, установленного в мобильное устройство)\
Модифицируемость: 99.99% (в зависимости от качества написанного кода)

### Выгрузка отчета
```mermaid
sequenceDiagram
    participant POS as Point Of Sale Publisher
    participant Q as Queue
    participant A as Admin Subscriber
    participant DB as Admin Database
    POS->>Q: Publishing report
    Q->>A: Reading report
    A->>DB: Saving report
```
#### Оценка атрибутов качества
Надежность: 99.99% (если решение хорошо отдебажено, то все отчеты будут гарантированно доставлены)\
Производительность: 99.99% (если очередь не забита сообщениями)\
Модифицируемость: 99.99% (в зависимости от качества написанного кода)


### Уведомление о необходимости пополнения точки продаж
```mermaid
sequenceDiagram
    participant POS as Point Of Sale
    participant S as Supplier
    POS->>S: Notification JSON
    S-->>POS: OK
```
#### Оценка атрибутов качества
Надежность: 99.99% (если накручены retry на стороне POS)\
Производительность: 99.99% (если нет проблем с сетью)\
Модифицируемость: 99.99% (в зависимости от качества написанного кода)
