# ERP для мебельного бизнеса

## Бизнес контекст
Владелец местных ларьков с хот-догами хочет обзавестить системой для управления торговыми точками.
Владелец мебельного бизнеса хочет обзавестись ERP системой.

**Пользователи**: <10 человек

**Требования**:
- система должна работать на ПК (желательно чтобы работала на мобильных устройствах, но не обязательно)
- есть возможноть:
  - составлять отчеты о ДДС (движении денежных средств) 
  - хранить договоры, контакты заказчиков, счета
  - хранить список сотрудников и графики их работы
  - вести учет инвентаря
  - планировать периодические платежи
- выгружать отчеты

**Дополнительный контекст**:
- вынуждены заняться разработкой, потому что текущие способы ведения учета требуют слишком много ручного труда
- ограничений по времени разработки нет, но хотелось бы чтобы в единицу времени закрывалось по одной потребности 
- бюджета практически нет

## Бизнес-цели и бизнес-драйверы

### Бизнес-драйверы
- отчеты ДДС пишутся в excel таблицах, что время от времени приводит к расхождению в цифрах
- расхождение в цифрах приводит к неоптимальному использованию бюджета
- количество excel таблиц растет в геометрической прогресии, их тяжело поддерживать в едином виде 

### Бизнес цели
Разработать ERP, которая сократит количество ручного труда и будет удовлетворять требуемым качествам.\
Компания хочет разработать систему, которая обеспечит устойчивый рост бизнеса.

## Стейкхолдеры и их потребности
Заинтересованные стороны, ключевые участники:
- Мастер - сотрудник компании, который создает предметы мебели
- Менеджер - сотрудник компании, который следит за ДДС, инвентарем на складе, загруженностью персонала
- Клиент - человек, который (хочет купить / купил / покупает) предметы мебели
- Владелец бизнеса - предприниматель, который заинтересован в увеличении количества продаж и ускорении роста своего бизнеса
- Команда разработки - системные администраторы / разработчики / проектные менеджеры / тестировщики

Потребности:
- оптимизация расходов за счет:
  - автоматизации процессов
  - снижения влияния человеческого фактора на учет проданных предметов мебели
- ускорение продаж за счет
  - планирования бюджета и отслеживанием состояния инвентаря на складе

## Бизнес ограничения
Компания не может держать в штате разработчика постоянно, но готова время от времени нанимать специалиста на небольшие задачи. 
Поэтому, имеет смысл:
- или использовать готовую ERP (если это дешево относительно разработки системы с нуля)
- или разрабатывать систему инкрементально, чтобы каждый новый внедряемый функционал не аффектил уже имеющийся

## Технологические ограничения
В связи с ограничениями описанными выше, система должна быть написана:
- на популярном языке программирования, чтобы не возникало трудностей с поиском разработчика
- с использованием популярного фреймворка, чтобы найденный разработчик быстро погрузился в курс дела

Поскольку пользователями приложения является ограниченный круг лиц, систему не нужно прорабатывать с точки отказоустойчивости под высокой нагрузкой.

## Пользовательские истории
UC-0: Отслеживание движения денежных средств:
- менеджер согласовывает договор с клиентом и после подписания фиксирует планируемый прием денежных средств (в последствии ДС) от покупателя в системе
- при покупке какого-либо инвентаря/ремонте чего-либо, менеджер фиксирует расходы в системе

UC-1: Логгирование загруженности персонала:
- менеджер следит за рабочим временем сотрудников и отмечает в системе когда сотрудник отсутствовал без уважительной причины (не edge-case, а очень частая ситуация)

UC-2: Учет инвентаря:
- менеджер фиксирует все перемещения инвентаря (на складе, на работе, в заточке...) в системе

## Атрибуты качества
- приложение, должно запускаться на любом ПК (опционально, но не обязательно - на носимом устройстве)
- приложение, должно быть высокодоступным, поскольку перебои в работе отрицательно скажутся на бизнесе
- потерянных договоров и отчетов быть не должно
- отчеты должны создаваться в формате csv / excel

## Контекстная схема
![context.png](https://github.com/ContinentalGuy/otus-arch/blob/master/project/sources/images/context.png)

## Критичные сценарии и критичные характеристики
**Критичные сценарии**:
- менеджеры используют приложение на ПК
- менеджеры ведут в системе учет движения денежных средств
- менеджеры фиксируют в системе все перемещения инвентаря

**Критичные характеристики**:
- система запускается на ПК
- доступность системы и базы данных
- надежность: не должно быть утерянных отчетов
- модифицируемость: система должна быть универсальна настолько, чтобы ее можно было легко обогащать новыми сущностями, важными для бизнеса, без внесения изменений в коде

Из них можно выделить две важных характеристики:
- Надежность
- Модифицируемость

## Архитектурное решение. Альтернативы
На основании контекста и бизнес сценария сфокусируемся на тех альтернативах, 
которые сильнее всего влияют на время разработки и работу приложения на мобильных устройствах:
1. готовая self-hosted ERP [erpnext](https://github.com/frappe/erpnext) система, написанная [на самом популярном языке программирования - Python](https://www.tiobe.com/tiobe-index/) по рейтингу TIOBE на 2023 год
2. собственная система со моделью данных, написанной под текущие требования

## Оценка архитектурных решений

### Архитектурное решение 1.
Готовая self-hosted ERP

Скорость разработки:
- молниеносно, поскольку ничего не надо разрабатывать, достаточно сконфигурировать, купить хостинг и запустить приложение на арендованной машине
- однако нужен специалист, который задеплоит всю систему и настроит ее. Поиск специалиста занимает какое-то время
- для дальнейшей поддержки/разработки потребуется дополнительное время на то чтобы разработчик разобрался в устройстве системы

Надежность:
- судя по количеству звезд и решенных проблем и коммитам на github, видно что проект активно и успешно развивается
- проект опенсорсный и если возникнет баг, сообщество будет его фиксить, но гарантии что фикс будет сделан в кратчайшие сроки - нет

### Архитектурное решение 2.
Собственная система, написанная под текущие требования

Скорость разработки:
- поиск разработчика занимает время
- разработка с нуля системы и приложений может быть длительной

Надежность:
- если система и приложения написаны с учетом всех требований, и команда разработки состоит из опытных специалистов, все ок :)


## Сравнительная оценка альтернатив
Качественная сравнительная оценка архитектурных решений:

**A-ERPNEXT**\
скорость: T\
надежность: D

**A-DEV**\
скорость: T\
надежность: D

> T - TTM \
D - Durability

---

На первый взгляд оба варианта кажутся равноценными. Но поскольку технические требования не сложные, \
и использование уже готового опенсорсного решения потребует погружение разработчика в уже существующий код,\
вариант создания системы с нуля под свои нужды с использованием популярного фреймворка выглядит более актуальным и простым в реализации.

В качестве языка программирования выбран Python, а фреймворка - Django.

На этом варианте и будет сконцентрирован дальнейший [ADR](adr_1.md).